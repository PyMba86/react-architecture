#React-MVP.

### Содержание

- Зависимости
- Структура проекта
- Инструкция по разворачиванию
- Описание команд
    - MVP
    - Раздел
- Создание нового раздела
- Тестирование
    - Инициализация тестов в разделах
    - Правила описания тестов

### Зависимости

-   [Node.js](https://nodejs.org/en/) - версия 10 и выше
-   [Yarn](https://yarnpkg.com/lang/en/) - пакетный менеджер
-   [Lerna](https://github.com/lerna/lerna) - инструмент для управления проектами с несколькими пакетами  

### Структура проекта

Преокт состоит из пакетов:

- *app* - содержит SPA приложения
    - *mvp* - входная точка в проекте
- *packages* - содержит независимые части приложения
    - *core* - ядро приложения, отвечает за логику и подключение к стороннему API
    - *example* - пример раздела или модуля
- *modules* - сторонние модули
   

### Инструкция по разворачиванию

Инициализация модулей проекта и их скачивание.

```bash
$ yarn run init:submodule
```

Установка всех зависимостей в проекте и связывание любых перекрестных зависимостей. Также установятся все пакеты

```bash
$ yarn run init:packages
```

Необходимо также создать файл `.env` для записи конфигурационных данных. Содержание файла

> SERVER_URL=/* Адрес сервера с API */

Сборка всего проекта осуществляется командой

```bash
$ yarn run build
```

Можно проверить все пакеты 

```bash
$ yarn workspaces info
```

Больше информации о `yarn workspaces` можно найти [здесь](https://yarnpkg.com/en/docs/cli/workspaces).

### Описание команд 

Команды:
   
    - init:packages - инициализация пакетов и их установка 
    - init:submodule - инициализация и обновление submodule
    - build - полная сборка проекта в режиме production
    - test - запуск тестов

#### MVP

Команды:
    
    - build - сборка проекта в режиме production 
    - build_dev - сборка проекта в режиме development
    - start - запуск dev-сервера на локальной машине
    - test - запуск тестов

#### Раздел

Команды:
    
    - build - сборка модуля 
    - start - запуск dev-сервера на локальной машине
    - test - запуск тестов

### Создание нового раздела

В качестве примера для раздела имеется *Example* в `packages/example`. Следует продублировать его в `packages` и переименовать под нужный раздел.

Добавить новый порт в `confug/ports.js` с именем раздела. Это необходимо для отдельно запуска раздела в браузере. **Внимание!** номера портов должны различаться.

В `packages/новый-раздел/webpack.build.js` задать 
```
output: {
    library: "Имя раздел",
    ...
},

```

Заменить `packages/новый-раздел/webpack.config.js` **port** на новый.

### Тестирование

Тестирование осуществляется с помощью фреймворка **Jest**. Больше информации о Jest можно узнать [здесь](https://jestjs.io/)

#### Инициализация тестов в разделах

Создаем следующие файлы в корне проекта, пример *app/cms*:

`babel.config.js`
```
const config = require("../../config/babel.config");

module.exports = config;
```

`jest.common.js`
```
const common = require("../../config/jest.common");

module.exports = common;
```

В `package.json` раздела создаем команду `"test": "jest"`.

#### Правила описания тестов

Название файла для теста должно соответствовать данному формату **.test.ts*. 

Структура теста:

```
describe("Название класса или модуля", () => {
    
    test("Название теста", () => {
        /* Исполняемый код */
    });

    describe("Название группы тестов или тестируемой функции", () => {
        /* Список исполняемых тест-кейсов */
    });

});
```

Разработку тестов необходимо вести по [TDD](https://en.wikipedia.org/wiki/Test-driven_development)
